---
alwaysApply: false
---
# ğŸ›  Tech & Versions (lockâ€‘in)

| Tool         | Version / Constraint                                                        |
| ------------ | --------------------------------------------------------------------------- |
| Next.js      | `15.3.5` (Appâ€¯Router only)                                                  |
| React        | `19.x`                                                                      |
| TypeScript   | `^5` (strict mode)                                                          |
| TailwindÂ CSS | `4.x` (darkâ€‘modeâ€‘first, JIT)                                                |
| PackageÂ Mgr  | **bun** â€” run `bun install` / `bun run`, donâ€™t add `npm` / `yarn` lockfiles |
| Runtime      | NodeÂ `20+`                                                                  |

> **Dependencies snapshot** (from `package.json`) is the single source of truth; do **not** add new packages without approval.

---

# ğŸ§© Architecture & Structure

* **Functional Components Only** â€” no classes.
* Directory naming: `lowercase-with-dashes`.
* Prefer **React Server Components**; mark client code with `"use client"` sparingly and wrap in `<Suspense/>`.
* Keep state local; escalate via Context only when unavoidable; never lift state unnecessarily.
* Use `nuqs` for URL search params, `useReducer` for complex local logic.
* File layout order inside modules: **export** â†’ subâ€‘components â†’ helpers â†’ constants â†’ types.
* Named exports everywhere; default exports only for Next.js `page.tsx`, `layout.tsx`, or `error.tsx`.

---

# ğŸ¨ UI & Styling

* Compose UI with **Shadcn/UI** primitives + **Tailwind** utilities.
* Mobileâ€‘first sizing; respect prefersâ€‘colorâ€‘scheme.
* Use `clsx` and `tailwind-merge` to assemble class names.
* Icons via **lucideâ€‘react**.
* Animate with `tw-animate-css` & `framerâ€‘motion` (lazyâ€‘load motion).

---

# âš¡ï¸ Performance & WebÂ Vitals

* Optimise **LCP/CLS/FID**: serverâ€‘render critical content, defer nonâ€‘essential JS with `dynamic()`.
* Use `next/image` (WebP, width/height set, lazy) for all imagery.
* Memoise expensive subâ€‘trees (`React.memo`, `useMemo`, `useCallback`).
* Provide stable `key` props for lists.

---

# ğŸ— Patterns & Practices

* `function` keyword for pure utilities; arrow functions only for inline callbacks.
* No enums; use literalÂ maps.
* Interfaces preferred over type aliases.
* Avoid magic numbers; extract constants.
* All fetches via typed helpers in `lib/api.ts`; handle errors with typed `Result` objects.
* Use **IndexedDB** helpers in `lib/db.ts` for persistence; interactions must be asynchronous and nonâ€‘blocking.

---

# âœ… Testing & Quality

* Test with **React Testing Library** & **Vitest** (configure via bun); cover edge cases & error paths.
* Write unit tests for utilities, integration tests for flows; snapshot tests only for stable output.
* Lint with `next lint` + `@typescript-eslint/*`; fix all `--max-warnings 0`.
* CI must run `bun run lint`, `bun run build`, and `bun test`.

---

# ğŸ“ Forms & Accessibility

* Controlled inputs; validation via Zod.
* Provide keyboard nav, ARIA labels, focus rings.
* All images include descriptive `alt`.

---

# ğŸ§¹ Houseâ€‘keeping

* Commit messages: `feat|fix|refactor|chore(scope): summary`.
* Keep PRs < 300 LOC; request review when coverage â‰¥Â 95â€¯%.
* Do not mutate `main`; branch off `feature/<ticket>` or `fix/<ticket>`.

---

# ğŸ”’ Security

* Sanitize all untrusted data.
* Use prepared statements / parameterized queries (if DB introduced).
* Never expose env secrets to the client.

---

# ğŸ›‘ When In Doubt

* Stop coding, ask the stakeholders (i.e., @YiÄŸit) for guidance, then proceed once clarified.
